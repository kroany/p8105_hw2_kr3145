p8105_hw2_kr3145
================
Kallan Roan
2025-09-23

Load libraries

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

# Problem 1

Read and clean pols-month.csv

``` r
pols_month_df = 
  read_csv("data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(
    mon, into = c("year", "month", "day"), sep = "-", convert = TRUE
    ) |>
  mutate(
    month = month.name[month]
  ) |> 
  pivot_longer(
    cols = starts_with("prez"),
    names_to = "president",
    values_to = "president_values",
    names_prefix = "prez_" 
  ) |> 
  filter(president_values == 1) |> 
  select(-day, -president_values) 
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Read and clean snp.csv

``` r
snp_df = 
  read_csv("data/snp.csv") |> 
  janitor::clean_names() |> 
  separate(
    date, into = c("month", "day", "year"), sep = "/", convert = TRUE
  ) |> 
  mutate(
    year = ifelse(year <= 15, year + 2000, year + 1900)
  ) |> 
  select(year, month, close, -day) |> 
  arrange(year, month) |> 
  mutate(
    month = month.name[month]
  )
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Read and clean unemployment.csv

``` r
unemployment_df = 
  read_csv("data/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "percent_unemployed"
  ) |> 
  mutate(
    month = month.name[match(toupper(month), toupper(month.abb))]
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Merge pols_month_df, snp_df, and unemployment_df

``` r
# join datasets
pols_snp_unempl_df =
  left_join(pols_month_df, snp_df, by = c("year", "month")) |> 
  left_join(unemployment_df, by = c("year", "month")) 
```

PARAGRAPH ABOUT DESCRIPTION HERE Write a short paragraph about these
datasets. Explain briefly what each dataset contained, and describe the
resulting dataset (e.g. give the dimension, range of years, and names of
key variables).

pols_month_df from pols-month.csv contains

snp_df from snp.csv contains

unemployment_df from unemployment.csv contains the …

- check snp.csv code

# Problem 2

Read and clean Mr. Trash Wheel dataset

``` r
mr_trash_wheel_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel",
             range = "A2:N655") |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(
    sports_balls = as.integer(round(sports_balls)),
    year = as.integer(year),
    trash_wheel = "mr"
  )
```

- 651 obs

Read and clean Professor Trash Wheel dataset

``` r
prof_trash_wheel_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel",
             skip = 1) |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(
    trash_wheel = "prof"
  )
```

- 119 obs

Read and clean Gwynnda Trash Wheel dataset

``` r
gwynnda_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynnda Trash Wheel",
             skip = 1) |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(
    trash_wheel = "gwynnda"
  )
```

- 263 obs, 262 individual dumpsters

Bind mr_trash_wheel_df, prof_trash_wheel_df, and gwynnda_df Create tidy
dataset

``` r
all_trash_wheel_df =
  bind_rows(mr_trash_wheel_df, prof_trash_wheel_df, gwynnda_df) |> 
  janitor::clean_names()
```

- pivot longer –\> type of litter, and number????
- home powered?

The resulting dataset has 1033 observations. Some key variables include
`weight_tons`, representing the weight of trash in tons, and
`volume_cubic_yards`, representing volume of trash in cubic yards. There
are also other variables representing litter types, including
`plastic_bottles`, `polystyrene`, `cigarette_butts`, `glass_bottles`,
`plastic_bags`, and `wrappers`. `home_powered` represents the number of
homes the amount of trash for the dumpster is able to power.

The total weight of trash collected by Professor Trash Wheel is 246.74
tons. The total number of cigarette butts collected by Gwynnda in June
of 2022 is 18120.

# Problem 3

Read and clean Zip Codes.csv

``` r
zip_code_df =
  read_csv("data/Zip Codes.csv") |> 
  janitor::clean_names() |> 
  arrange(county, zip_code) |> 
  select(-state_fips, -file_date) 
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

- arrange by county and zip code
- remove state fips and file date
- rearrange to have variables start with county and zip code

Read and clean Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv

``` r
zip_zori_df =
  read_csv("data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    col = x2015_01_31:x2024_08_31,
    names_to = "date",
    values_to = "zori",
    names_prefix = "x"
  ) |> 
  separate(
    date, into = c("year", "month", "day"), sep = "_", convert = TRUE
  ) |> 
  rename(zip_code = region_name, county = county_name) |> 
  select(county, zip_code, everything(), -(region_type:metro), -day) |> 
  mutate(county = str_trim(str_remove(county, "County"))) |> 
  arrange(county, zip_code) 
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

- remove region_type, state_name, city,
- rename region_name to zip_code
- pivot longer
- clean up date variable
- fix county_name to remove County
- rearrange to have variables start with county and zip code
- ???remove NA values???

Merge zip_zori_df and zip_code_df

For all available ZIP codes, compare rental prices in January 2021 to
prices in January 2020. Make a table that shows the 10 ZIP codes (along
with the borough and neighborhood) with largest drop in price from
January 2020 to 2021.
